const u=(l,s,r,w=.8)=>new Promise((h,a)=>{const d=new FileReader;d.readAsDataURL(l),d.onload=g=>{const n=new Image;n.src=g.target?.result,n.onload=()=>{const o=document.createElement("canvas");let e=n.width,t=n.height;e>s&&(t=Math.round(t*s/e),e=s),r&&t>r&&(e=Math.round(e*r/t),t=r),o.width=e,o.height=t;const i=o.getContext("2d");if(!i){a(new Error("Canvas context could not be created"));return}i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(n,0,0,e,t),o.toBlob(c=>{if(c){const m=new File([c],l.name,{type:"image/jpeg",lastModified:Date.now()});h(m)}else a(new Error("Canvas to Blob failed"))},"image/jpeg",w)},n.onerror=o=>a(o)},d.onerror=g=>a(g)});export{u as r};

import{c as Ve,r as f,u as We,a as Xe,j as t,b as Re,H as Ye}from"./app-DSFXfF52.js";import{P as Ze,S as et,A as tt,a as st,b as lt,c as rt,d as it,e as at,f as ot,g as ct}from"./alert-dialog-D_skCVqk.js";import{B as Ue}from"./button-BpIb5EdY.js";import{D as nt,a as dt,b as mt,c as ft,d as ht,e as gt}from"./dialog-oJ1Fy3Mx.js";import{I as Le}from"./input-BDSKdxE6.js";import{L as W}from"./label-d3h4UFki.js";import{a as pt,b as ut,c as xt,S as jt,d as bt}from"./select-BQRXur7x.js";import{S as St}from"./switch-CWb8dp-H.js";import{T as _t}from"./textarea-Dt1RoiQf.js";import{A as yt}from"./app-layout-D933pNtL.js";import{d as X}from"./index-DGdR22o3.js";import{A as $e,a as qe,b as ze,C as vt}from"./alert-CPfrlgkO.js";import{columns as Ct}from"./columns-drP-IarV.js";import{DataTable as Dt}from"./data-table-pv1gxTsM.js";import{C as Nt}from"./circle-check-ZmcexSAv.js";/* empty css            */import"./createLucideIcon-BOMyxqx3.js";import"./index-DxdomAUA.js";import"./index-e5DzauLD.js";import"./dropdown-menu-BcN_ru-f.js";import"./index-DZ6XgPJ6.js";import"./check-CRPhO7Rc.js";import"./index-DSOkqTVi.js";import"./index-CMWG4mbA.js";import"./app-logo-icon-CoVmjKJI.js";import"./trash-2-D90NJxTC.js";import"./index-BrH3tsp2.js";const At=[{title:"Dashboard",href:"/dashboard"},{title:"Sub Categories",href:"/dashboard/sub-categories"}];function ss(Q){const e=Ve.c(136),{subCategories:Se,categories:_e,filters:o}=Q,[ye,ve]=f.useState(!1),[Ce,De]=f.useState(!1),[h,Be]=f.useState(null),[V,Me]=f.useState(null),[i,Ge]=f.useState(o.search||""),{flash:n}=We().props;let Y;e[0]!==o.direction||e[1]!==o.field?(Y=o.field?[{id:o.field,desc:o.direction==="desc"}]:[],e[0]=o.direction,e[1]=o.field,e[2]=Y):Y=e[2];const[c,Je]=f.useState(Y);let Z;e[3]!==o.search||e[4]!==i||e[5]!==c?(Z=()=>{const s=setTimeout(()=>{i!==(o.search||"")&&Re.get(X.subCategories.index().url,{search:i,field:c[0]?.id,direction:c[0]?c[0].desc?"desc":"asc":void 0},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(s)},e[3]=o.search,e[4]=i,e[5]=c,e[6]=Z):Z=e[6];let ee;e[7]!==i?(ee=[i],e[7]=i,e[8]=ee):ee=e[8],f.useEffect(Z,ee);let te;e[9]!==i||e[10]!==c?(te=s=>{const a=typeof s=="function"?s(c):s;Je(a),Re.get(X.subCategories.index().url,{search:i,field:a[0]?.id,direction:a[0]?a[0].desc?"desc":"asc":void 0},{preserveState:!0,replace:!0})},e[9]=i,e[10]=c,e[11]=te):te=e[11];const Ne=te;let se;e[12]===Symbol.for("react.memo_cache_sentinel")?(se={category_id:"",name:"",description:"",order:0,is_nav:!0},e[12]=se):se=e[12];const{data:r,setData:l,post:Ae,patch:Te,delete:we,processing:ke,reset:Ee,errors:d}=Xe(se);let m,g,p;if(e[13]!==h||e[14]!==Te||e[15]!==Ae||e[16]!==Ee||e[17]!==l){g=a=>{a.preventDefault(),h?Te(X.subCategories.update(h.id).url,{onSuccess:()=>m()}):Ae(X.subCategories.store().url,{onSuccess:()=>m()})};let s;e[21]!==l?(s=a=>{Be(a),l({category_id:a.category_id.toString(),name:a.name,description:a.description||"",order:a.order,is_nav:a.is_nav}),ve(!0)},e[21]=l,e[22]=s):s=e[22],p=s,m=()=>{ve(!1),Be(null),Ee()},e[13]=h,e[14]=Te,e[15]=Ae,e[16]=Ee,e[17]=l,e[18]=m,e[19]=g,e[20]=p}else m=e[18],g=e[19],p=e[20];let le;e[23]===Symbol.for("react.memo_cache_sentinel")?(le=s=>{Me(s),De(!0)},e[23]=le):le=e[23];const Ke=le;let re;e[24]!==we||e[25]!==V?(re=()=>{V&&we(X.subCategories.destroy(V.id).url,{onSuccess:()=>{De(!1),Me(null)}})},e[24]=we,e[25]=V,e[26]=re):re=e[26];const Fe=re;let ie;e[27]!==p?(ie=Ct(p,Ke),e[27]=p,e[28]=ie):ie=e[28];const Ie=ie;let ae;e[29]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(Ye,{title:"Sub Categories"}),e[29]=ae):ae=e[29];let u;e[30]!==n.success?(u=n.success&&t.jsxs($e,{variant:"default",className:"border-green-500/50 bg-green-50 text-green-700 dark:bg-green-950/20 dark:text-green-400",children:[t.jsx(Nt,{className:"h-4 w-4"}),t.jsx(qe,{children:"Success"}),t.jsx(ze,{children:n.success})]}),e[30]=n.success,e[31]=u):u=e[31];let x;e[32]!==n.error?(x=n.error&&t.jsxs($e,{variant:"destructive",children:[t.jsx(vt,{className:"h-4 w-4"}),t.jsx(qe,{children:"Error"}),t.jsx(ze,{children:n.error})]}),e[32]=n.error,e[33]=x):x=e[33];let oe;e[34]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Manage Sub Categories"}),e[34]=oe):oe=e[34];let j;e[35]!==m?(j=s=>!s&&m(),e[35]=m,e[36]=j):j=e[36];let ce;e[37]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(nt,{asChild:!0,children:t.jsxs(Ue,{onClick:()=>ve(!0),children:[t.jsx(Ze,{className:"mr-2 h-4 w-4"})," Add Sub Category"]})}),e[37]=ce):ce=e[37];const Oe=h?"Edit":"Create";let b;e[38]!==Oe?(b=t.jsx(dt,{children:t.jsxs(mt,{children:[Oe," Sub Category"]})}),e[38]=Oe,e[39]=b):b=e[39];let ne;e[40]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(W,{htmlFor:"category_id",children:"Parent Category"}),e[40]=ne):ne=e[40];const Qe=r.category_id;let S;e[41]!==l?(S=s=>l("category_id",s),e[41]=l,e[42]=S):S=e[42];let de;e[43]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(pt,{children:t.jsx(ut,{placeholder:"Select a category"})}),e[43]=de):de=e[43];let _;e[44]!==_e?(_=_e.map(Tt),e[44]=_e,e[45]=_):_=e[45];let y;e[46]!==_?(y=t.jsx(xt,{children:_}),e[46]=_,e[47]=y):y=e[47];let v;e[48]!==r.category_id||e[49]!==S||e[50]!==y?(v=t.jsxs(jt,{value:Qe,onValueChange:S,children:[de,y]}),e[48]=r.category_id,e[49]=S,e[50]=y,e[51]=v):v=e[51];let C;e[52]!==d.category_id?(C=d.category_id&&t.jsx("p",{className:"text-sm text-red-500",children:d.category_id}),e[52]=d.category_id,e[53]=C):C=e[53];let D;e[54]!==v||e[55]!==C?(D=t.jsxs("div",{className:"grid gap-2",children:[ne,v,C]}),e[54]=v,e[55]=C,e[56]=D):D=e[56];let me;e[57]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(W,{htmlFor:"name",children:"Name"}),e[57]=me):me=e[57];let N;e[58]!==l?(N=s=>l("name",s.target.value),e[58]=l,e[59]=N):N=e[59];let A;e[60]!==r.name||e[61]!==N?(A=t.jsx(Le,{id:"name",value:r.name,onChange:N}),e[60]=r.name,e[61]=N,e[62]=A):A=e[62];let T;e[63]!==d.name?(T=d.name&&t.jsx("p",{className:"text-sm text-red-500",children:d.name}),e[63]=d.name,e[64]=T):T=e[64];let w;e[65]!==A||e[66]!==T?(w=t.jsxs("div",{className:"grid gap-2",children:[me,A,T]}),e[65]=A,e[66]=T,e[67]=w):w=e[67];let fe;e[68]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(W,{htmlFor:"description",children:"Description (Optional)"}),e[68]=fe):fe=e[68];let k;e[69]!==l?(k=s=>l("description",s.target.value),e[69]=l,e[70]=k):k=e[70];let E;e[71]!==r.description||e[72]!==k?(E=t.jsxs("div",{className:"grid gap-2",children:[fe,t.jsx(_t,{id:"description",value:r.description,onChange:k})]}),e[71]=r.description,e[72]=k,e[73]=E):E=e[73];let he;e[74]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(W,{htmlFor:"order",children:"Display Order"}),e[74]=he):he=e[74];let F;e[75]!==l?(F=s=>l("order",parseInt(s.target.value)||0),e[75]=l,e[76]=F):F=e[76];let I;e[77]!==r.order||e[78]!==F?(I=t.jsxs("div",{className:"grid gap-2",children:[he,t.jsx(Le,{id:"order",type:"number",value:r.order,onChange:F})]}),e[77]=r.order,e[78]=F,e[79]=I):I=e[79];let O;e[80]!==l?(O=s=>l("is_nav",s),e[80]=l,e[81]=O):O=e[81];let H;e[82]!==r.is_nav||e[83]!==O?(H=t.jsx(St,{id:"is_nav",checked:r.is_nav,onCheckedChange:O}),e[82]=r.is_nav,e[83]=O,e[84]=H):H=e[84];let ge;e[85]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(W,{htmlFor:"is_nav",children:"In Navbar"}),e[85]=ge):ge=e[85];let P;e[86]!==H?(P=t.jsx("div",{className:"flex flex-col justify-end gap-2 pb-2",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[H,ge]})}),e[86]=H,e[87]=P):P=e[87];let L;e[88]!==I||e[89]!==P?(L=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[I,P]}),e[88]=I,e[89]=P,e[90]=L):L=e[90];const He=h?"Update":"Save";let B;e[91]!==ke||e[92]!==He?(B=t.jsx(ft,{children:t.jsxs(Ue,{type:"submit",disabled:ke,children:[He," Sub Category"]})}),e[91]=ke,e[92]=He,e[93]=B):B=e[93];let M;e[94]!==g||e[95]!==D||e[96]!==w||e[97]!==E||e[98]!==L||e[99]!==B?(M=t.jsxs("form",{onSubmit:g,className:"grid gap-4 py-4",children:[D,w,E,L,B]}),e[94]=g,e[95]=D,e[96]=w,e[97]=E,e[98]=L,e[99]=B,e[100]=M):M=e[100];let R;e[101]!==b||e[102]!==M?(R=t.jsxs(ht,{className:"sm:max-w-[425px]",children:[b,M]}),e[101]=b,e[102]=M,e[103]=R):R=e[103];let U;e[104]!==ye||e[105]!==j||e[106]!==R?(U=t.jsxs("div",{className:"flex items-center justify-between",children:[oe,t.jsxs(gt,{open:ye,onOpenChange:j,children:[ce,R]})]}),e[104]=ye,e[105]=j,e[106]=R,e[107]=U):U=e[107];let pe;e[108]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(et,{className:"absolute top-2.5 left-2.5 h-4 w-4 text-muted-foreground"}),e[108]=pe):pe=e[108];let ue;e[109]===Symbol.for("react.memo_cache_sentinel")?(ue=s=>Ge(s.target.value),e[109]=ue):ue=e[109];let $;e[110]!==i?($=t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("div",{className:"relative w-full max-w-sm",children:[pe,t.jsx(Le,{type:"search",placeholder:"Search sub categories...",className:"pl-8",value:i,onChange:ue})]})}),e[110]=i,e[111]=$):$=e[111];let q;e[112]!==Ne||e[113]!==c||e[114]!==Se||e[115]!==Ie?(q=t.jsx(Dt,{columns:Ie,data:Se,sorting:c,onSortingChange:Ne}),e[112]=Ne,e[113]=c,e[114]=Se,e[115]=Ie,e[116]=q):q=e[116];let xe;e[117]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(tt,{children:"Are you absolutely sure?"}),e[117]=xe):xe=e[117];const Pe=V?.name;let z;e[118]!==Pe?(z=t.jsxs(st,{children:[xe,t.jsxs(lt,{children:["This action cannot be undone. This will permanently delete the sub category"," ",t.jsx("strong",{children:Pe}),"."]})]}),e[118]=Pe,e[119]=z):z=e[119];let je;e[120]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx(rt,{children:"Cancel"}),e[120]=je):je=e[120];let G;e[121]!==Fe?(G=t.jsxs(it,{children:[je,t.jsx(at,{onClick:Fe,className:"bg-red-600 hover:bg-red-700 hover:text-white",children:"Delete"})]}),e[121]=Fe,e[122]=G):G=e[122];let J;e[123]!==z||e[124]!==G?(J=t.jsxs(ot,{children:[z,G]}),e[123]=z,e[124]=G,e[125]=J):J=e[125];let K;e[126]!==Ce||e[127]!==J?(K=t.jsx(ct,{open:Ce,onOpenChange:De,children:J}),e[126]=Ce,e[127]=J,e[128]=K):K=e[128];let be;return e[129]!==u||e[130]!==x||e[131]!==U||e[132]!==$||e[133]!==q||e[134]!==K?(be=t.jsxs(yt,{breadcrumbs:At,children:[ae,t.jsxs("div",{className:"mx-auto flex w-full max-w-7xl flex-col gap-4 p-2 sm:p-4 md:p-6",children:[u,x,U,$,q,K]})]}),e[129]=u,e[130]=x,e[131]=U,e[132]=$,e[133]=q,e[134]=K,e[135]=be):be=e[135],be}function Tt(Q){return t.jsx(bt,{value:Q.id.toString(),children:Q.name},Q.id)}export{ss as default};
